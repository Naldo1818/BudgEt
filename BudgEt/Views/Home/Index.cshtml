@{
    ViewData["Title"] = "Financial Dashboard";
}

<div class="row mb-4">

    <!-- Month Selector -->
    <div class="col-md-3">
        <div class="card p-3 shadow-sm">
            <h5>Select Month</h5>
            <input type="month" id="month" class="form-control" onchange="loadMonthData()">
        </div>
    </div>

    <!-- Summary -->
    <div class="col-md-9">
        <div class="card p-3 shadow-sm">
            <div class="row text-center">
                <div class="col-md-4">
                    <h6>Total Income</h6>
                    <h4 class="text-success">R<span id="total-income">0.00</span></h4>
                </div>
                <div class="col-md-4">
                    <h6>Total Expenses</h6>
                    <h4 class="text-danger">R<span id="total-expenses">0.00</span></h4>
                </div>
                <div class="col-md-4">
                    <h6>Balance</h6>
                    <h4 id="balance" class="fw-bold">R0.00</h4>
                </div>
            </div>
        </div>
    </div>

</div>

<!-- Add Transaction Section -->
<div class="row mb-4">
    <div class="col-md-12">
        <div class="card p-3 shadow-sm">
            <h5>Add Transaction</h5>
            <div class="row g-2">

                <div class="col-md-3">
                    <select id="transaction-type" class="form-select">
                        <option value="income">Income</option>
                        <option value="expense">Expense</option>
                    </select>
                </div>

                <div class="col-md-3">
                    <select id="transaction-category" class="form-select"></select>
                </div>

                <div class="col-md-3">
                    <input type="number"
                           id="transaction-amount"
                           class="form-control"
                           placeholder="Amount (R)">
                </div>

                <!-- DESCRIPTION FIELD ONLY FOR EXPENSE -->
                <div class="col-md-3" id="description-container" style="display:none;">
                    <input type="text"
                           id="transaction-description"
                           class="form-control"
                           placeholder="Expense description">
                </div>

                <div class="col-md-3">
                    <button class="btn btn-primary w-100"
                            onclick="addTransactionFromSection()">
                        Add Transaction
                    </button>
                </div>

            </div>
        </div>
    </div>
</div>

<hr />

<h4>Income Categories</h4>
<div class="row" id="income-sections"></div>

<hr />

<h4>Expense Categories</h4>
<div class="row" id="expense-sections"></div>

<hr />

<div class="row mt-4">
    <div class="col-md-6">
        <div class="card p-3 shadow-sm">
            <h5>Expense Breakdown</h5>
            <canvas id="expensePieChart"></canvas>
        </div>
    </div>

    <div class="col-md-6">
        <div class="card p-3 shadow-sm">
            <h5>Monthly Comparison</h5>
            <canvas id="monthlyChart"></canvas>
        </div>
    </div>
</div>

@section Scripts {
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="~/js/financial-dashboard.js" asp-append-version="true"></script>
}
